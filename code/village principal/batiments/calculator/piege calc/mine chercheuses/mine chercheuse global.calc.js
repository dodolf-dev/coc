import { mine_chercheuse1_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { mine_chercheuse2_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { mine_chercheuse3_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { mine_chercheuse4_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { mine_chercheuse5_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { mine_chercheuse6_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { mine_chercheuse7_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { mine_chercheuse8_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerTempsTotalmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerTempsTotalmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerTempsTotalmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerTempsTotalmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerTempsTotalmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerTempsTotalmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerTempsTotalmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerTempsTotalmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerTempsRestantmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";    
import { calculerTempsRestantmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerTempsRestantmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerTempsRestantmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerTempsRestantmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerTempsRestantmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerTempsRestantmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerTempsRestantmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerTempsdepuisHDVmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerTempsdepuisHDVmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerTempsdepuisHDVmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerTempsdepuisHDVmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerTempsdepuisHDVmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerTempsdepuisHDVmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerTempsdepuisHDVmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerTempsdepuisHDVmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerTempsConstructionParHDVmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerTempsConstructionParHDVmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerTempsConstructionParHDVmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerTempsConstructionParHDVmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerTempsConstructionParHDVmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerTempsConstructionParHDVmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerTempsConstructionParHDVmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerTempsConstructionParHDVmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerPrixTotalmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerPrixTotalmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerPrixTotalmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerPrixTotalmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerPrixTotalmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerPrixTotalmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerPrixTotalmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerPrixTotalmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerPrixRestantmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerPrixRestantmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerPrixRestantmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerPrixRestantmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerPrixRestantmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerPrixRestantmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerPrixRestantmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerPrixRestantmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerPrixdepuisHDVmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerPrixdepuisHDVmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerPrixdepuisHDVmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerPrixdepuisHDVmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerPrixdepuisHDVmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerPrixdepuisHDVmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerPrixdepuisHDVmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerPrixdepuisHDVmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerPrixConstructionParHDVmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerPrixConstructionParHDVmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerPrixConstructionParHDVmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerPrixConstructionParHDVmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerPrixConstructionParHDVmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerPrixConstructionParHDVmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerPrixConstructionParHDVmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerPrixConstructionParHDVmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerExperienceTotalmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerExperienceTotalmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerExperienceTotalmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerExperienceTotalmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerExperienceTotalmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerExperienceTotalmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerExperienceTotalmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerExperienceTotalmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerExperienceRestantmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerExperienceRestantmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerExperienceRestantmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerExperienceRestantmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerExperienceRestantmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerExperienceRestantmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerExperienceRestantmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerExperienceRestantmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerExperiencedepuisHDVmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerExperiencedepuisHDVmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerExperiencedepuisHDVmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerExperiencedepuisHDVmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerExperiencedepuisHDVmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerExperiencedepuisHDVmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerExperiencedepuisHDVmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerExperiencedepuisHDVmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { calculerExperienceConstructionParHDVmine_chercheuse1 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse1.calc.js";
import { calculerExperienceConstructionParHDVmine_chercheuse2 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse2.calc.js";
import { calculerExperienceConstructionParHDVmine_chercheuse3 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse3.calc.js";
import { calculerExperienceConstructionParHDVmine_chercheuse4 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse4.calc.js";
import { calculerExperienceConstructionParHDVmine_chercheuse5 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse5.calc.js";
import { calculerExperienceConstructionParHDVmine_chercheuse6 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse6.calc.js";
import { calculerExperienceConstructionParHDVmine_chercheuse7 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse7.calc.js";
import { calculerExperienceConstructionParHDVmine_chercheuse8 } from "/coc/code/village principal/batiments/calculator/piege calc/mine chercheuses/mine chercheuse8.calc.js";

import { formatPrix } from "/coc/code/outils/affichge nombre.js";
import { convertirSecondescompact } from "/coc/code/outils/convertisseurtemps.js";

function getHDVLevel() {
    return document.getElementById("hdv").value;
}

function getmine_chercheuseLevel(num) {
    return document.getElementById(`mine_chercheuse${num}`).value;
}

let hdvlevel = getHDVLevel(); // Récupérer le niveau de l'Hôtel de Ville

let mine_chercheuse1level = getmine_chercheuseLevel(1);
let mine_chercheuse2level = getmine_chercheuseLevel(2);
let mine_chercheuse3level = getmine_chercheuseLevel(3);
let mine_chercheuse4level = getmine_chercheuseLevel(4);
let mine_chercheuse5level = getmine_chercheuseLevel(5);
let mine_chercheuse6level = getmine_chercheuseLevel(6);
let mine_chercheuse7level = getmine_chercheuseLevel(7);
let mine_chercheuse8level = getmine_chercheuseLevel(8);

let mine_chercheuse1levelmax = mine_chercheuse1_nv_max_hdv(hdvlevel);
let mine_chercheuse2levelmax = mine_chercheuse2_nv_max_hdv(hdvlevel);
let mine_chercheuse3levelmax = mine_chercheuse3_nv_max_hdv(hdvlevel);
let mine_chercheuse4levelmax = mine_chercheuse4_nv_max_hdv(hdvlevel);
let mine_chercheuse5levelmax = mine_chercheuse5_nv_max_hdv(hdvlevel);
let mine_chercheuse6levelmax = mine_chercheuse6_nv_max_hdv(hdvlevel);
let mine_chercheuse7levelmax = mine_chercheuse7_nv_max_hdv(hdvlevel);
let mine_chercheuse8levelmax = mine_chercheuse8_nv_max_hdv(hdvlevel);

export function calculerPourcentageNiveauxmine_chercheuses() {
    // Niveaux actuels
    const niveauxActuels = [
        Math.min(mine_chercheuse1level, mine_chercheuse1levelmax),
        Math.min(mine_chercheuse2level, mine_chercheuse2levelmax),
        Math.min(mine_chercheuse3level, mine_chercheuse3levelmax),
        Math.min(mine_chercheuse4level, mine_chercheuse4levelmax),
        Math.min(mine_chercheuse5level, mine_chercheuse5levelmax),
        Math.min(mine_chercheuse6level, mine_chercheuse6levelmax),
        Math.min(mine_chercheuse7level, mine_chercheuse7levelmax),
        Math.min(mine_chercheuse8level, mine_chercheuse8levelmax),
    ];

    // Niveaux max possibles selon HDV
    const niveauxMax = [
        mine_chercheuse1levelmax,
        mine_chercheuse2levelmax,
        mine_chercheuse3levelmax,
        mine_chercheuse4levelmax,
        mine_chercheuse5levelmax,
        mine_chercheuse6levelmax,
        mine_chercheuse7levelmax,
        mine_chercheuse8levelmax,
    ];

    // Calcul des totaux
    const totalMax = niveauxMax.reduce((a, b) => a + b, 0);
    const totalActuel = niveauxActuels.reduce((a, b) => a + b, 0);

    if (totalMax === 0) return 0; // Évite la division par zéro

    const progression = (totalActuel / totalMax) * 100;
    return parseFloat(progression.toFixed(2)); // Limite a 2 décimales
}

export function globalcalculertempsRestantmine_chercheuses() {
    const hdvlevel = parseInt(getHDVLevel(), 10);

    const mine_chercheuse1level = parseInt(getmine_chercheuseLevel(1), 10);
    const mine_chercheuse2level = parseInt(getmine_chercheuseLevel(2), 10);
    const mine_chercheuse3level = parseInt(getmine_chercheuseLevel(3), 10);
    const mine_chercheuse4level = parseInt(getmine_chercheuseLevel(4), 10);
    const mine_chercheuse5level = parseInt(getmine_chercheuseLevel(5), 10);
    const mine_chercheuse6level = parseInt(getmine_chercheuseLevel(6), 10);
    const mine_chercheuse7level = parseInt(getmine_chercheuseLevel(7), 10);
    const mine_chercheuse8level = parseInt(getmine_chercheuseLevel(8), 10);

    const mine_chercheuse1levelmax = mine_chercheuse1_nv_max_hdv(hdvlevel);
    const mine_chercheuse2levelmax = mine_chercheuse2_nv_max_hdv(hdvlevel);
    const mine_chercheuse3levelmax = mine_chercheuse3_nv_max_hdv(hdvlevel);
    const mine_chercheuse4levelmax = mine_chercheuse4_nv_max_hdv(hdvlevel);
    const mine_chercheuse5levelmax = mine_chercheuse5_nv_max_hdv(hdvlevel);
    const mine_chercheuse6levelmax = mine_chercheuse6_nv_max_hdv(hdvlevel);
    const mine_chercheuse7levelmax = mine_chercheuse7_nv_max_hdv(hdvlevel);
    const mine_chercheuse8levelmax = mine_chercheuse8_nv_max_hdv(hdvlevel);

    let tempsRestant = 0;
    tempsRestant += calculerTempsRestantmine_chercheuse1(mine_chercheuse1level, mine_chercheuse1levelmax);
    tempsRestant += calculerTempsRestantmine_chercheuse2(mine_chercheuse2level, mine_chercheuse2levelmax);
    tempsRestant += calculerTempsRestantmine_chercheuse3(mine_chercheuse3level, mine_chercheuse3levelmax);
    tempsRestant += calculerTempsRestantmine_chercheuse4(mine_chercheuse4level, mine_chercheuse4levelmax);
    tempsRestant += calculerTempsRestantmine_chercheuse5(mine_chercheuse5level, mine_chercheuse5levelmax);
    tempsRestant += calculerTempsRestantmine_chercheuse6(mine_chercheuse6level, mine_chercheuse6levelmax);
    tempsRestant += calculerTempsRestantmine_chercheuse7(mine_chercheuse7level, mine_chercheuse7levelmax);
    tempsRestant += calculerTempsRestantmine_chercheuse8(mine_chercheuse8level, mine_chercheuse8levelmax);
    return tempsRestant;
}

export function globalcalculertempsTotalmine_chercheuses() {
    let tempsTotal = 0;
    tempsTotal += calculerTempsTotalmine_chercheuse1(mine_chercheuse1level);
    tempsTotal += calculerTempsTotalmine_chercheuse2(mine_chercheuse2level);
    tempsTotal += calculerTempsTotalmine_chercheuse3(mine_chercheuse3level);
    tempsTotal += calculerTempsTotalmine_chercheuse4(mine_chercheuse4level);
    tempsTotal += calculerTempsTotalmine_chercheuse5(mine_chercheuse5level);
    tempsTotal += calculerTempsTotalmine_chercheuse6(mine_chercheuse6level);
    tempsTotal += calculerTempsTotalmine_chercheuse7(mine_chercheuse7level);
    tempsTotal += calculerTempsTotalmine_chercheuse8(mine_chercheuse8level);
    return tempsTotal;
}

export function globalcalculertempsdepuisHDVmine_chercheuses() {
    let tempsTotal = 0;
    tempsTotal += calculerTempsdepuisHDVmine_chercheuse1(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVmine_chercheuse2(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVmine_chercheuse3(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVmine_chercheuse4(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVmine_chercheuse5(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVmine_chercheuse6(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVmine_chercheuse7(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVmine_chercheuse8(hdvlevel);
    return tempsTotal;
}

export function globalcalculertempsConstructionParHDVmine_chercheuses() {
    let tempsTotal = 0;
    tempsTotal += calculerTempsConstructionParHDVmine_chercheuse1(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVmine_chercheuse2(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVmine_chercheuse3(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVmine_chercheuse4(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVmine_chercheuse5(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVmine_chercheuse6(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVmine_chercheuse7(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVmine_chercheuse8(hdvlevel);
    return tempsTotal;
}

export function barredeprogressiontempsmine_chercheuses() {
    const tempsTotal = globalcalculertempsTotalmine_chercheuses();
    const tempsRestant = globalcalculertempsRestantmine_chercheuses();
    const tempsConstructionHDV = globalcalculertempsConstructionParHDVmine_chercheuses();

    if (tempsTotal === 0) {
        return 0; // Évite la division par zéro
    }

    if (tempsTotal >= tempsConstructionHDV) {
        const progression = ((tempsTotal - tempsRestant) / tempsTotal) * 100;
        return progression.toFixed(2);
    } else {
        // Ajout d'une tolérance pour éviter des valeurs négatives excessives
        const difference = tempsConstructionHDV - tempsTotal;
        if (difference < 0.01 * tempsConstructionHDV) { // Tolérance de 1%
            return 0; // Considérer comme aucune progression négative
        }
        const retard = (difference / tempsConstructionHDV) * 100;
        return (-retard).toFixed(2);
    }
}

export function globalcalculerPrixTotalmine_chercheuse() {
    let couttotal = 0;
    couttotal += calculerPrixTotalmine_chercheuse1(mine_chercheuse1level);
    couttotal += calculerPrixTotalmine_chercheuse2(mine_chercheuse2level);
    couttotal += calculerPrixTotalmine_chercheuse3(mine_chercheuse3level);
    couttotal += calculerPrixTotalmine_chercheuse4(mine_chercheuse4level);
    couttotal += calculerPrixTotalmine_chercheuse5(mine_chercheuse5level);
    couttotal += calculerPrixTotalmine_chercheuse6(mine_chercheuse6level);
    couttotal += calculerPrixTotalmine_chercheuse7(mine_chercheuse7level);
    couttotal += calculerPrixTotalmine_chercheuse8(mine_chercheuse8level);
    return couttotal;
}

export function globalcalculerPrixRestantmine_chercheuse() {
    const hdvlevel = parseInt(getHDVLevel(), 10);

    const mine_chercheuse1level = parseInt(getmine_chercheuseLevel(1), 10);
    const mine_chercheuse2level = parseInt(getmine_chercheuseLevel(2), 10);
    const mine_chercheuse3level = parseInt(getmine_chercheuseLevel(3), 10);
    const mine_chercheuse4level = parseInt(getmine_chercheuseLevel(4), 10);
    const mine_chercheuse5level = parseInt(getmine_chercheuseLevel(5), 10);
    const mine_chercheuse6level = parseInt(getmine_chercheuseLevel(6), 10);
    const mine_chercheuse7level = parseInt(getmine_chercheuseLevel(7), 10);
    const mine_chercheuse8level = parseInt(getmine_chercheuseLevel(8), 10);

    const mine_chercheuse1levelmax = mine_chercheuse1_nv_max_hdv(hdvlevel);
    const mine_chercheuse2levelmax = mine_chercheuse2_nv_max_hdv(hdvlevel);
    const mine_chercheuse3levelmax = mine_chercheuse3_nv_max_hdv(hdvlevel);
    const mine_chercheuse4levelmax = mine_chercheuse4_nv_max_hdv(hdvlevel);
    const mine_chercheuse5levelmax = mine_chercheuse5_nv_max_hdv(hdvlevel);
    const mine_chercheuse6levelmax = mine_chercheuse6_nv_max_hdv(hdvlevel);
    const mine_chercheuse7levelmax = mine_chercheuse7_nv_max_hdv(hdvlevel);
    const mine_chercheuse8levelmax = mine_chercheuse8_nv_max_hdv(hdvlevel);

    let coutrestant = 0;
    coutrestant += calculerPrixRestantmine_chercheuse1(mine_chercheuse1level, mine_chercheuse1levelmax);
    coutrestant += calculerPrixRestantmine_chercheuse2(mine_chercheuse2level, mine_chercheuse2levelmax);
    coutrestant += calculerPrixRestantmine_chercheuse3(mine_chercheuse3level, mine_chercheuse3levelmax);
    coutrestant += calculerPrixRestantmine_chercheuse4(mine_chercheuse4level, mine_chercheuse4levelmax);
    coutrestant += calculerPrixRestantmine_chercheuse5(mine_chercheuse5level, mine_chercheuse5levelmax);
    coutrestant += calculerPrixRestantmine_chercheuse6(mine_chercheuse6level, mine_chercheuse6levelmax);
    coutrestant += calculerPrixRestantmine_chercheuse7(mine_chercheuse7level, mine_chercheuse7levelmax);
    coutrestant += calculerPrixRestantmine_chercheuse8(mine_chercheuse8level, mine_chercheuse8levelmax);
    return coutrestant;
}

export function globalcalculerPrixdepuisHDVmine_chercheuse() {
    let couttotal = 0;
    couttotal += calculerPrixdepuisHDVmine_chercheuse1(hdvlevel);
    couttotal += calculerPrixdepuisHDVmine_chercheuse2(hdvlevel);
    couttotal += calculerPrixdepuisHDVmine_chercheuse3(hdvlevel);
    couttotal += calculerPrixdepuisHDVmine_chercheuse4(hdvlevel);
    couttotal += calculerPrixdepuisHDVmine_chercheuse5(hdvlevel);
    couttotal += calculerPrixdepuisHDVmine_chercheuse6(hdvlevel);
    couttotal += calculerPrixdepuisHDVmine_chercheuse7(hdvlevel);
    couttotal += calculerPrixdepuisHDVmine_chercheuse8(hdvlevel);
    return couttotal;
}

export function globalcalculerPrixConstructionParHDVmine_chercheuse() {
    let couttotal = 0;
    couttotal += calculerPrixConstructionParHDVmine_chercheuse1(hdvlevel);
    couttotal += calculerPrixConstructionParHDVmine_chercheuse2(hdvlevel);
    couttotal += calculerPrixConstructionParHDVmine_chercheuse3(hdvlevel);
    couttotal += calculerPrixConstructionParHDVmine_chercheuse4(hdvlevel);
    couttotal += calculerPrixConstructionParHDVmine_chercheuse5(hdvlevel);
    couttotal += calculerPrixConstructionParHDVmine_chercheuse6(hdvlevel);
    couttotal += calculerPrixConstructionParHDVmine_chercheuse7(hdvlevel);
    couttotal += calculerPrixConstructionParHDVmine_chercheuse8(hdvlevel);
    return couttotal;
}

export function barredeprogrssionprixmine_chercheuses () {
    const prixTotal = globalcalculerprixTotalmine_chercheuses();
    const prixRestant = globalcalculerprixRestantmine_chercheuses();
    const prixConstructionHDV = globalcalculerprixConstructionParHDVmine_chercheuses();
    if (prixTotal > prixConstructionHDV) {
        let progression = ((prixTotal - prixRestant) / prixTotal) * 100;
        return progression.toFixed(2);
    } else {
        let retard = ((prixConstructionHDV - prixTotal) / prixTotal) * 100;
        return (-retard).toFixed(2);
    }
}


export function globalcalculerExperienceTotalmine_chercheuse() {
    let expTotal = 0;
    expTotal += calculerExperienceTotalmine_chercheuse1(mine_chercheuse1level);
    expTotal += calculerExperienceTotalmine_chercheuse2(mine_chercheuse2level);
    expTotal += calculerExperienceTotalmine_chercheuse3(mine_chercheuse3level);
    expTotal += calculerExperienceTotalmine_chercheuse4(mine_chercheuse4level);
    expTotal += calculerExperienceTotalmine_chercheuse5(mine_chercheuse5level);
    expTotal += calculerExperienceTotalmine_chercheuse6(mine_chercheuse6level);
    expTotal += calculerExperienceTotalmine_chercheuse7(mine_chercheuse7level);
    expTotal += calculerExperienceTotalmine_chercheuse8(mine_chercheuse8level);
    return expTotal;
}

export function globalcalculerExperienceRestantmine_chercheuse() {
    let exprestant = 0;
    exprestant += calculerExperienceRestantmine_chercheuse1(mine_chercheuse1level, mine_chercheuse1levelmax);
    exprestant += calculerExperienceRestantmine_chercheuse2(mine_chercheuse2level, mine_chercheuse2levelmax);
    exprestant += calculerExperienceRestantmine_chercheuse3(mine_chercheuse3level, mine_chercheuse3levelmax);
    exprestant += calculerExperienceRestantmine_chercheuse4(mine_chercheuse4level, mine_chercheuse4levelmax);
    exprestant += calculerExperienceRestantmine_chercheuse5(mine_chercheuse5level, mine_chercheuse5levelmax);
    exprestant += calculerExperienceRestantmine_chercheuse6(mine_chercheuse6level, mine_chercheuse6levelmax);
    exprestant += calculerExperienceRestantmine_chercheuse7(mine_chercheuse7level, mine_chercheuse7levelmax);
    exprestant += calculerExperienceRestantmine_chercheuse8(mine_chercheuse8level, mine_chercheuse8levelmax);
    return exprestant;
}

export function globalcalculerExperiencedepuisHDVmine_chercheuse() {
    let exptotal = 0;
    exptotal += calculerExperiencedepuisHDVmine_chercheuse1(hdvlevel);
    exptotal += calculerExperiencedepuisHDVmine_chercheuse2(hdvlevel);
    exptotal += calculerExperiencedepuisHDVmine_chercheuse3(hdvlevel);
    exptotal += calculerExperiencedepuisHDVmine_chercheuse4(hdvlevel);
    exptotal += calculerExperiencedepuisHDVmine_chercheuse5(hdvlevel);
    exptotal += calculerExperiencedepuisHDVmine_chercheuse6(hdvlevel);
    exptotal += calculerExperiencedepuisHDVmine_chercheuse7(hdvlevel);
    exptotal += calculerExperiencedepuisHDVmine_chercheuse8(hdvlevel);
    return exptotal;
}

export function globalcalculerExperienceConstructionParHDVmine_chercheuse() {
    let exptotal = 0;
    exptotal += calculerExperienceConstructionParHDVmine_chercheuse1(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVmine_chercheuse2(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVmine_chercheuse3(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVmine_chercheuse4(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVmine_chercheuse5(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVmine_chercheuse6(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVmine_chercheuse7(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVmine_chercheuse8(hdvlevel);
    return exptotal;
}

export function barredeprogressionexpmine_chercheuses() {
    const expTotal = globalcalculerExperienceTotalmine_chercheuse();
    const expRestant = globalcalculerExperienceRestantmine_chercheuse();
    const expConstructionHDV = globalcalculerExperienceConstructionParHDVmine_chercheuse();
    if (expTotal > expConstructionHDV) {
        let progression = ((expTotal - expRestant) / expTotal) * 100;
        return progression.toFixed(2);
    } else {
        let retard = ((expConstructionHDV - expTotal) / expTotal) * 100;
        return (-retard).toFixed(2);
    }
}

// Fonction pour mettre à jour la barre de progression
function updatemine_chercheuseProgress() {
    // Recalculer le niveau de l'Hôtel de Ville
    hdvlevel = getHDVLevel();

    // Recalculer les niveaux des mine_chercheuses
    mine_chercheuse1level = getmine_chercheuseLevel(1);
    mine_chercheuse2level = getmine_chercheuseLevel(2);
    mine_chercheuse3level = getmine_chercheuseLevel(3);
    mine_chercheuse4level = getmine_chercheuseLevel(4);
    mine_chercheuse5level = getmine_chercheuseLevel(5);
    mine_chercheuse6level = getmine_chercheuseLevel(6);
    mine_chercheuse7level = getmine_chercheuseLevel(7);
    mine_chercheuse8level = getmine_chercheuseLevel(8);

    // Recalculer les niveaux maximums des mine_chercheuses en fonction du niveau HDV
    mine_chercheuse1levelmax = mine_chercheuse1_nv_max_hdv(hdvlevel);
    mine_chercheuse2levelmax = mine_chercheuse2_nv_max_hdv(hdvlevel);
    mine_chercheuse3levelmax = mine_chercheuse3_nv_max_hdv(hdvlevel);
    mine_chercheuse4levelmax = mine_chercheuse4_nv_max_hdv(hdvlevel);
    mine_chercheuse5levelmax = mine_chercheuse5_nv_max_hdv(hdvlevel);
    mine_chercheuse6levelmax = mine_chercheuse6_nv_max_hdv(hdvlevel);
    mine_chercheuse7levelmax = mine_chercheuse7_nv_max_hdv(hdvlevel);
    mine_chercheuse8levelmax = mine_chercheuse8_nv_max_hdv(hdvlevel);
    // Calculer le pourcentage de progression
    const progression = calculerPourcentageNiveauxmine_chercheuses();

    // Mettre à jour la barre de progression et le texte
    const progressBar = document.getElementById('progress-mine_chercheuses');
    const progressText = document.getElementById('progress-mine_chercheuses-value');
    const progressTimeText = document.getElementById('progress-mine_chercheuses-temps');
    const progressPriceText = document.getElementById('progress-mine_chercheuses-prix-or');

    if (progressBar && progressText) {
        progressBar.value = progression;
        progressText.textContent = `${progression.toFixed(2)}%`; // Limiter à 2 décimales
    }
    if (progressTimeText) {
        const tempsRestant = globalcalculertempsRestantmine_chercheuses();
        if (tempsRestant === 0) {
            progressTimeText.style.display = "none";
        }
        else {
            progressTimeText.style.display = "";
            progressTimeText.innerHTML = `${convertirSecondescompact(tempsRestant)} <img src="/coc/image/général/ressource/temps icone.png" alt="temps" class="icone-ressource">`;
        }
    }
    if (progressPriceText) {
        const prixRestant = globalcalculerPrixRestantmine_chercheuse();
        if (prixRestant === 0){
            progressPriceText.style.display = "none";
        }
        else {
            progressPriceText.style.display = "";
            progressPriceText.innerHTML = `${formatPrix(prixRestant)} <img src="/coc/image/village principal/ressource/or village-p.jpg" alt="or" class="icone-ressource">`;
        }
    }
}

// Ajouter des écouteurs d'événements pour détecter les changements
document.addEventListener('DOMContentLoaded', () => {
    const mine_chercheuseSelects = [
        document.getElementById('mine_chercheuse1'),
        document.getElementById('mine_chercheuse2'),
        document.getElementById('mine_chercheuse3'),
        document.getElementById('mine_chercheuse4'),
        document.getElementById('mine_chercheuse5'),
        document.getElementById('mine_chercheuse6'),
        document.getElementById('mine_chercheuse7'),
        document.getElementById('mine_chercheuse8'),
    ];

    // Ajouter un écouteur pour chaque mine_chercheuse
    mine_chercheuseSelects.forEach(select => {
        if (select) {
            select.addEventListener('change', updatemine_chercheuseProgress);
        }
    });

    // Ajouter un écouteur pour le changement du niveau HDV
    const hdvSelect = document.getElementById('hdv');
    if (hdvSelect) {
        hdvSelect.addEventListener('change', updatemine_chercheuseProgress);
    }

    // Initialiser la barre de progression au chargement
    updatemine_chercheuseProgress();
});