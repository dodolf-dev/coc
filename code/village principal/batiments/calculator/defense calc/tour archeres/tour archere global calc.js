import { tour_archere1_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { tour_archere2_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { tour_archere3_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { tour_archere4_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { tour_archere5_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { tour_archere6_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { tour_archere7_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { tour_archere8_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { tour_archere9_nv_max_hdv } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerTempsTotaltour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerTempsTotaltour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerTempsTotaltour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerTempsTotaltour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerTempsTotaltour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerTempsTotaltour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerTempsTotaltour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerTempsTotaltour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerTempsTotaltour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerTempsRestanttour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";    
import { calculerTempsRestanttour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerTempsRestanttour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerTempsRestanttour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerTempsRestanttour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerTempsRestanttour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerTempsRestanttour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerTempsRestanttour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerTempsRestanttour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerTempsdepuisHDVtour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerTempsdepuisHDVtour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerTempsdepuisHDVtour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerTempsdepuisHDVtour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerTempsdepuisHDVtour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerTempsdepuisHDVtour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerTempsdepuisHDVtour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerTempsdepuisHDVtour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerTempsdepuisHDVtour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerTempsConstructionParHDVtour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerTempsConstructionParHDVtour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerTempsConstructionParHDVtour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerTempsConstructionParHDVtour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerTempsConstructionParHDVtour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerTempsConstructionParHDVtour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerTempsConstructionParHDVtour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerTempsConstructionParHDVtour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerTempsConstructionParHDVtour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerPrixTotaltour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerPrixTotaltour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerPrixTotaltour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerPrixTotaltour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerPrixTotaltour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerPrixTotaltour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerPrixTotaltour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerPrixTotaltour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerPrixTotaltour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerPrixRestanttour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerPrixRestanttour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerPrixRestanttour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerPrixRestanttour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerPrixRestanttour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerPrixRestanttour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerPrixRestanttour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerPrixRestanttour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerPrixRestanttour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerPrixdepuisHDVtour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerPrixdepuisHDVtour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerPrixdepuisHDVtour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerPrixdepuisHDVtour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerPrixdepuisHDVtour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerPrixdepuisHDVtour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerPrixdepuisHDVtour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerPrixdepuisHDVtour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerPrixdepuisHDVtour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerPrixConstructionParHDVtour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerPrixConstructionParHDVtour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerPrixConstructionParHDVtour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerPrixConstructionParHDVtour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerPrixConstructionParHDVtour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerPrixConstructionParHDVtour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerPrixConstructionParHDVtour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerPrixConstructionParHDVtour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerPrixConstructionParHDVtour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerExperienceTotaltour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerExperienceTotaltour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerExperienceTotaltour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerExperienceTotaltour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerExperienceTotaltour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerExperienceTotaltour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerExperienceTotaltour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerExperienceTotaltour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerExperienceTotaltour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerExperienceRestanttour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerExperienceRestanttour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerExperienceRestanttour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerExperienceRestanttour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerExperienceRestanttour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerExperienceRestanttour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerExperienceRestanttour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerExperienceRestanttour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerExperienceRestanttour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerExperiencedepuisHDVtour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerExperiencedepuisHDVtour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerExperiencedepuisHDVtour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerExperiencedepuisHDVtour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerExperiencedepuisHDVtour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerExperiencedepuisHDVtour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerExperiencedepuisHDVtour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerExperiencedepuisHDVtour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerExperiencedepuisHDVtour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { calculerExperienceConstructionParHDVtour_archere1 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere1.calc.js";
import { calculerExperienceConstructionParHDVtour_archere2 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere2.calc.js";
import { calculerExperienceConstructionParHDVtour_archere3 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere3.calc.js";
import { calculerExperienceConstructionParHDVtour_archere4 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere4.calc.js";
import { calculerExperienceConstructionParHDVtour_archere5 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere5.calc.js";
import { calculerExperienceConstructionParHDVtour_archere6 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere6.calc.js";
import { calculerExperienceConstructionParHDVtour_archere7 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere7.calc.js";
import { calculerExperienceConstructionParHDVtour_archere8 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere8.calc.js";
import { calculerExperienceConstructionParHDVtour_archere9 } from "/coc/code/village principal/batiments/calculator/defense calc/tour archeres/tour archere9.calc.js";

import { formatPrix } from "/coc/code/outils/affichge nombre.js";
import { convertirSecondescompact } from "/coc/code/outils/convertisseurtemps.js";

function getHDVLevel() {
    return document.getElementById("hdv").value;
}

function gettour_archereLevel(num) {
    return document.getElementById(`tour_archere${num}`).value;
}

let hdvlevel = getHDVLevel(); // Récupérer le niveau de l'Hôtel de Ville

let tour_archere1level = gettour_archereLevel(1);
let tour_archere2level = gettour_archereLevel(2);
let tour_archere3level = gettour_archereLevel(3);
let tour_archere4level = gettour_archereLevel(4);
let tour_archere5level = gettour_archereLevel(5);
let tour_archere6level = gettour_archereLevel(6);
let tour_archere7level = gettour_archereLevel(7);
let tour_archere8level = gettour_archereLevel(8);
let tour_archere9level = gettour_archereLevel(9);

let tour_archere1levelmax = tour_archere1_nv_max_hdv(hdvlevel);
let tour_archere2levelmax = tour_archere2_nv_max_hdv(hdvlevel);
let tour_archere3levelmax = tour_archere3_nv_max_hdv(hdvlevel);
let tour_archere4levelmax = tour_archere4_nv_max_hdv(hdvlevel);
let tour_archere5levelmax = tour_archere5_nv_max_hdv(hdvlevel);
let tour_archere6levelmax = tour_archere6_nv_max_hdv(hdvlevel);
let tour_archere7levelmax = tour_archere7_nv_max_hdv(hdvlevel);
let tour_archere8levelmax = tour_archere8_nv_max_hdv(hdvlevel);
let tour_archere9levelmax = tour_archere9_nv_max_hdv(hdvlevel);

export function calculerPourcentageNiveauxtour_archeres() {
    // Niveaux actuels
    const niveauxActuels = [
        Math.min(tour_archere1level, tour_archere1levelmax),
        Math.min(tour_archere2level, tour_archere2levelmax),
        Math.min(tour_archere3level, tour_archere3levelmax),
        Math.min(tour_archere4level, tour_archere4levelmax),
        Math.min(tour_archere5level, tour_archere5levelmax),
        Math.min(tour_archere6level, tour_archere6levelmax),
        Math.min(tour_archere7level, tour_archere7levelmax),
        Math.min(tour_archere8level, tour_archere8levelmax),
        Math.min(tour_archere9level, tour_archere9levelmax)
    ];

    // Niveaux max possibles selon HDV
    const niveauxMax = [
        tour_archere1levelmax,
        tour_archere2levelmax,
        tour_archere3levelmax,
        tour_archere4levelmax,
        tour_archere5levelmax,
        tour_archere6levelmax,
        tour_archere7levelmax,
        tour_archere8levelmax,
        tour_archere9levelmax
    ];

    // Calcul des totaux
    const totalMax = niveauxMax.reduce((a, b) => a + b, 0);
    const totalActuel = niveauxActuels.reduce((a, b) => a + b, 0);

    if (totalMax === 0) return 0; // Évite la division par zéro

    const progression = (totalActuel / totalMax) * 100;
    return parseFloat(progression.toFixed(2)); // Limite a 2 décimales
}

export function globalcalculertempsRestanttour_archeres() {
    const hdvlevel = parseInt(getHDVLevel(), 10);

    const tour_archere1level = parseInt(gettour_archereLevel(1), 10);
    const tour_archere2level = parseInt(gettour_archereLevel(2), 10);
    const tour_archere3level = parseInt(gettour_archereLevel(3), 10);
    const tour_archere4level = parseInt(gettour_archereLevel(4), 10);
    const tour_archere5level = parseInt(gettour_archereLevel(5), 10);
    const tour_archere6level = parseInt(gettour_archereLevel(6), 10);
    const tour_archere7level = parseInt(gettour_archereLevel(7), 10);
    const tour_archere8level = parseInt(gettour_archereLevel(8), 10);
    const tour_archere9level = parseInt(gettour_archereLevel(9), 10);

    const tour_archere1levelmax = tour_archere1_nv_max_hdv(hdvlevel);
    const tour_archere2levelmax = tour_archere2_nv_max_hdv(hdvlevel);
    const tour_archere3levelmax = tour_archere3_nv_max_hdv(hdvlevel);
    const tour_archere4levelmax = tour_archere4_nv_max_hdv(hdvlevel);
    const tour_archere5levelmax = tour_archere5_nv_max_hdv(hdvlevel);
    const tour_archere6levelmax = tour_archere6_nv_max_hdv(hdvlevel);
    const tour_archere7levelmax = tour_archere7_nv_max_hdv(hdvlevel);
    const tour_archere8levelmax = tour_archere8_nv_max_hdv(hdvlevel);
    const tour_archere9levelmax = tour_archere9_nv_max_hdv(hdvlevel);

    let tempsRestant = 0;
    tempsRestant += calculerTempsRestanttour_archere1(tour_archere1level, tour_archere1levelmax);
    tempsRestant += calculerTempsRestanttour_archere2(tour_archere2level, tour_archere2levelmax);
    tempsRestant += calculerTempsRestanttour_archere3(tour_archere3level, tour_archere3levelmax);
    tempsRestant += calculerTempsRestanttour_archere4(tour_archere4level, tour_archere4levelmax);
    tempsRestant += calculerTempsRestanttour_archere5(tour_archere5level, tour_archere5levelmax);
    tempsRestant += calculerTempsRestanttour_archere6(tour_archere6level, tour_archere6levelmax);
    tempsRestant += calculerTempsRestanttour_archere7(tour_archere7level, tour_archere7levelmax);
    tempsRestant += calculerTempsRestanttour_archere8(tour_archere8level, tour_archere8levelmax);
    tempsRestant += calculerTempsRestanttour_archere9(tour_archere9level, tour_archere9levelmax);

    return tempsRestant;
}

export function globalcalculertempsTotaltour_archeres() {
    let tempsTotal = 0;
    tempsTotal += calculerTempsTotaltour_archere1(tour_archere1level);
    tempsTotal += calculerTempsTotaltour_archere2(tour_archere2level);
    tempsTotal += calculerTempsTotaltour_archere3(tour_archere3level);
    tempsTotal += calculerTempsTotaltour_archere4(tour_archere4level);
    tempsTotal += calculerTempsTotaltour_archere5(tour_archere5level);
    tempsTotal += calculerTempsTotaltour_archere6(tour_archere6level);
    tempsTotal += calculerTempsTotaltour_archere7(tour_archere7level);
    tempsTotal += calculerTempsTotaltour_archere8(tour_archere8level);
    tempsTotal += calculerTempsTotaltour_archere9(tour_archere9level);
    return tempsTotal;
}

export function globalcalculertempsdepuisHDVtour_archeres() {
    let tempsTotal = 0;
    tempsTotal += calculerTempsdepuisHDVtour_archere1(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVtour_archere2(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVtour_archere3(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVtour_archere4(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVtour_archere5(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVtour_archere6(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVtour_archere7(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVtour_archere8(hdvlevel);
    tempsTotal += calculerTempsdepuisHDVtour_archere9(hdvlevel);
    return tempsTotal;
}

export function globalcalculertempsConstructionParHDVtour_archeres() {
    let tempsTotal = 0;
    tempsTotal += calculerTempsConstructionParHDVtour_archere1(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVtour_archere2(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVtour_archere3(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVtour_archere4(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVtour_archere5(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVtour_archere6(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVtour_archere7(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVtour_archere8(hdvlevel);
    tempsTotal += calculerTempsConstructionParHDVtour_archere9(hdvlevel);
    return tempsTotal;
}

export function barredeprogressiontempstour_archeres() {
    const tempsTotal = globalcalculertempsTotaltour_archeres();
    const tempsRestant = globalcalculertempsRestanttour_archeres();
    const tempsConstructionHDV = globalcalculertempsConstructionParHDVtour_archeres();

    if (tempsTotal === 0) {
        return 0; // Évite la division par zéro
    }

    if (tempsTotal >= tempsConstructionHDV) {
        const progression = ((tempsTotal - tempsRestant) / tempsTotal) * 100;
        return progression.toFixed(2);
    } else {
        // Ajout d'une tolérance pour éviter des valeurs négatives excessives
        const difference = tempsConstructionHDV - tempsTotal;
        if (difference < 0.01 * tempsConstructionHDV) { // Tolérance de 1%
            return 0; // Considérer comme aucune progression négative
        }
        const retard = (difference / tempsConstructionHDV) * 100;
        return (-retard).toFixed(2);
    }
}

export function globalcalculerPrixTotaltour_archere() {
    let couttotal = 0;
    couttotal += calculerPrixTotaltour_archere1(tour_archere1level);
    couttotal += calculerPrixTotaltour_archere2(tour_archere2level);
    couttotal += calculerPrixTotaltour_archere3(tour_archere3level);
    couttotal += calculerPrixTotaltour_archere4(tour_archere4level);
    couttotal += calculerPrixTotaltour_archere5(tour_archere5level);
    couttotal += calculerPrixTotaltour_archere6(tour_archere6level);
    couttotal += calculerPrixTotaltour_archere7(tour_archere7level);
    couttotal += calculerPrixTotaltour_archere8(tour_archere8level);
    couttotal += calculerPrixTotaltour_archere9(tour_archere9level);
    return couttotal;
}

export function globalcalculerPrixRestanttour_archere() {
    const hdvlevel = parseInt(getHDVLevel(), 10);

    const tour_archere1level = parseInt(gettour_archereLevel(1), 10);
    const tour_archere2level = parseInt(gettour_archereLevel(2), 10);
    const tour_archere3level = parseInt(gettour_archereLevel(3), 10);
    const tour_archere4level = parseInt(gettour_archereLevel(4), 10);
    const tour_archere5level = parseInt(gettour_archereLevel(5), 10);
    const tour_archere6level = parseInt(gettour_archereLevel(6), 10);
    const tour_archere7level = parseInt(gettour_archereLevel(7), 10);
    const tour_archere8level = parseInt(gettour_archereLevel(8), 10);
    const tour_archere9level = parseInt(gettour_archereLevel(9), 10);

    const tour_archere1levelmax = tour_archere1_nv_max_hdv(hdvlevel);
    const tour_archere2levelmax = tour_archere2_nv_max_hdv(hdvlevel);
    const tour_archere3levelmax = tour_archere3_nv_max_hdv(hdvlevel);
    const tour_archere4levelmax = tour_archere4_nv_max_hdv(hdvlevel);
    const tour_archere5levelmax = tour_archere5_nv_max_hdv(hdvlevel);
    const tour_archere6levelmax = tour_archere6_nv_max_hdv(hdvlevel);
    const tour_archere7levelmax = tour_archere7_nv_max_hdv(hdvlevel);
    const tour_archere8levelmax = tour_archere8_nv_max_hdv(hdvlevel);
    const tour_archere9levelmax = tour_archere9_nv_max_hdv(hdvlevel);

    let coutrestant = 0;
    coutrestant += calculerPrixRestanttour_archere1(tour_archere1level, tour_archere1levelmax);
    coutrestant += calculerPrixRestanttour_archere2(tour_archere2level, tour_archere2levelmax);
    coutrestant += calculerPrixRestanttour_archere3(tour_archere3level, tour_archere3levelmax);
    coutrestant += calculerPrixRestanttour_archere4(tour_archere4level, tour_archere4levelmax);
    coutrestant += calculerPrixRestanttour_archere5(tour_archere5level, tour_archere5levelmax);
    coutrestant += calculerPrixRestanttour_archere6(tour_archere6level, tour_archere6levelmax);
    coutrestant += calculerPrixRestanttour_archere7(tour_archere7level, tour_archere7levelmax);
    coutrestant += calculerPrixRestanttour_archere8(tour_archere8level, tour_archere8levelmax);
    coutrestant += calculerPrixRestanttour_archere9(tour_archere9level, tour_archere9levelmax);
    return coutrestant;
}

export function globalcalculerPrixdepuisHDVtour_archere() {
    let couttotal = 0;
    couttotal += calculerPrixdepuisHDVtour_archere1(hdvlevel);
    couttotal += calculerPrixdepuisHDVtour_archere2(hdvlevel);
    couttotal += calculerPrixdepuisHDVtour_archere3(hdvlevel);
    couttotal += calculerPrixdepuisHDVtour_archere4(hdvlevel);
    couttotal += calculerPrixdepuisHDVtour_archere5(hdvlevel);
    couttotal += calculerPrixdepuisHDVtour_archere6(hdvlevel);
    couttotal += calculerPrixdepuisHDVtour_archere7(hdvlevel);
    couttotal += calculerPrixdepuisHDVtour_archere8(hdvlevel);
    couttotal += calculerPrixdepuisHDVtour_archere9(hdvlevel);
    return couttotal;
}

export function globalcalculerPrixConstructionParHDVtour_archere() {
    let couttotal = 0;
    couttotal += calculerPrixConstructionParHDVtour_archere1(hdvlevel);
    couttotal += calculerPrixConstructionParHDVtour_archere2(hdvlevel);
    couttotal += calculerPrixConstructionParHDVtour_archere3(hdvlevel);
    couttotal += calculerPrixConstructionParHDVtour_archere4(hdvlevel);
    couttotal += calculerPrixConstructionParHDVtour_archere5(hdvlevel);
    couttotal += calculerPrixConstructionParHDVtour_archere6(hdvlevel);
    couttotal += calculerPrixConstructionParHDVtour_archere7(hdvlevel);
    couttotal += calculerPrixConstructionParHDVtour_archere8(hdvlevel);
    couttotal += calculerPrixConstructionParHDVtour_archere9(hdvlevel);
    return couttotal;
}

export function barredeprogrssionprixtour_archeres () {
    const prixTotal = globalcalculerprixTotaltour_archeres();
    const prixRestant = globalcalculerprixRestanttour_archeres();
    const prixConstructionHDV = globalcalculerprixConstructionParHDVtour_archeres();
    if (prixTotal > prixConstructionHDV) {
        let progression = ((prixTotal - prixRestant) / prixTotal) * 100;
        return progression.toFixed(2);
    } else {
        let retard = ((prixConstructionHDV - prixTotal) / prixTotal) * 100;
        return (-retard).toFixed(2);
    }
}


export function globalcalculerExperienceTotaltour_archere() {
    let expTotal = 0;
    expTotal += calculerExperienceTotaltour_archere1(tour_archere1level);
    expTotal += calculerExperienceTotaltour_archere2(tour_archere2level);
    expTotal += calculerExperienceTotaltour_archere3(tour_archere3level);
    expTotal += calculerExperienceTotaltour_archere4(tour_archere4level);
    expTotal += calculerExperienceTotaltour_archere5(tour_archere5level);
    expTotal += calculerExperienceTotaltour_archere6(tour_archere6level);
    expTotal += calculerExperienceTotaltour_archere7(tour_archere7level);
    expTotal += calculerExperienceTotaltour_archere8(tour_archere8level);
    expTotal += calculerExperienceTotaltour_archere9(tour_archere9level);
    return expTotal;
}

export function globalcalculerExperienceRestanttour_archere() {
    let exprestant = 0;
    exprestant += calculerExperienceRestanttour_archere1(tour_archere1level, tour_archere1levelmax);
    exprestant += calculerExperienceRestanttour_archere2(tour_archere2level, tour_archere2levelmax);
    exprestant += calculerExperienceRestanttour_archere3(tour_archere3level, tour_archere3levelmax);
    exprestant += calculerExperienceRestanttour_archere4(tour_archere4level, tour_archere4levelmax);
    exprestant += calculerExperienceRestanttour_archere5(tour_archere5level, tour_archere5levelmax);
    exprestant += calculerExperienceRestanttour_archere6(tour_archere6level, tour_archere6levelmax);
    exprestant += calculerExperienceRestanttour_archere7(tour_archere7level, tour_archere7levelmax);
    exprestant += calculerExperienceRestanttour_archere8(tour_archere8level, tour_archere8levelmax);
    exprestant += calculerExperienceRestanttour_archere9(tour_archere9level, tour_archere9levelmax);
    return exprestant;
}

export function globalcalculerExperiencedepuisHDVtour_archere() {
    let exptotal = 0;
    exptotal += calculerExperiencedepuisHDVtour_archere1(hdvlevel);
    exptotal += calculerExperiencedepuisHDVtour_archere2(hdvlevel);
    exptotal += calculerExperiencedepuisHDVtour_archere3(hdvlevel);
    exptotal += calculerExperiencedepuisHDVtour_archere4(hdvlevel);
    exptotal += calculerExperiencedepuisHDVtour_archere5(hdvlevel);
    exptotal += calculerExperiencedepuisHDVtour_archere6(hdvlevel);
    exptotal += calculerExperiencedepuisHDVtour_archere7(hdvlevel);
    exptotal += calculerExperiencedepuisHDVtour_archere8(hdvlevel);
    exptotal += calculerExperiencedepuisHDVtour_archere9(hdvlevel);
    return exptotal;
}

export function globalcalculerExperienceConstructionParHDVtour_archere() {
    let exptotal = 0;
    exptotal += calculerExperienceConstructionParHDVtour_archere1(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVtour_archere2(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVtour_archere3(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVtour_archere4(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVtour_archere5(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVtour_archere6(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVtour_archere7(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVtour_archere8(hdvlevel);
    exptotal += calculerExperienceConstructionParHDVtour_archere9(hdvlevel);
    return exptotal;
}

export function barredeprogressionexptour_archeres() {
    const expTotal = globalcalculerExperienceTotaltour_archere();
    const expRestant = globalcalculerExperienceRestanttour_archere();
    const expConstructionHDV = globalcalculerExperienceConstructionParHDVtour_archere();
    if (expTotal > expConstructionHDV) {
        let progression = ((expTotal - expRestant) / expTotal) * 100;
        return progression.toFixed(2);
    } else {
        let retard = ((expConstructionHDV - expTotal) / expTotal) * 100;
        return (-retard).toFixed(2);
    }
}

// Fonction pour mettre à jour la barre de progression
function updatetour_archereProgress() {
    // Recalculer le niveau de l'Hôtel de Ville
    hdvlevel = getHDVLevel();

    // Recalculer les niveaux des tour_archeres
    tour_archere1level = gettour_archereLevel(1);
    tour_archere2level = gettour_archereLevel(2);
    tour_archere3level = gettour_archereLevel(3);
    tour_archere4level = gettour_archereLevel(4);
    tour_archere5level = gettour_archereLevel(5);
    tour_archere6level = gettour_archereLevel(6);
    tour_archere7level = gettour_archereLevel(7);
    tour_archere8level = gettour_archereLevel(8);
    tour_archere9level = gettour_archereLevel(9);

    // Recalculer les niveaux maximums des tour_archeres en fonction du niveau HDV
    tour_archere1levelmax = tour_archere1_nv_max_hdv(hdvlevel);
    tour_archere2levelmax = tour_archere2_nv_max_hdv(hdvlevel);
    tour_archere3levelmax = tour_archere3_nv_max_hdv(hdvlevel);
    tour_archere4levelmax = tour_archere4_nv_max_hdv(hdvlevel);
    tour_archere5levelmax = tour_archere5_nv_max_hdv(hdvlevel);
    tour_archere6levelmax = tour_archere6_nv_max_hdv(hdvlevel);
    tour_archere7levelmax = tour_archere7_nv_max_hdv(hdvlevel);
    tour_archere8levelmax = tour_archere8_nv_max_hdv(hdvlevel);
    tour_archere9levelmax = tour_archere9_nv_max_hdv(hdvlevel);
    // Calculer le pourcentage de progression
    const progression = calculerPourcentageNiveauxtour_archeres();

    // Mettre à jour la barre de progression et le texte
    const progressBar = document.getElementById('progress-tour_archeres');
    const progressText = document.getElementById('progress-tour_archeres-value');
    const progressTimeText = document.getElementById('progress-tour_archeres-temps');
    const progressPriceText = document.getElementById('progress-tour_archeres-prix-or');

    if (progressBar && progressText) {
        progressBar.value = progression;
        progressText.textContent = `${progression.toFixed(2)}%`; // Limiter à 2 décimales
    }
    if (progressTimeText) {
        const tempsRestant = globalcalculertempsRestanttour_archeres();
        if (tempsRestant === 0) {
            progressTimeText.style.display = "none";
        }
        else {
            progressTimeText.style.display = "";
            progressTimeText.innerHTML = `${convertirSecondescompact(tempsRestant)} <img src="/coc/image/général/ressource/temps icone.png" alt="temps" class="icone-ressource">`;
        }
    }
    if (progressPriceText) {
        const prixRestant = globalcalculerPrixRestanttour_archere();
        if (prixRestant === 0){
            progressPriceText.style.display = "none";
        }
        else {
            progressPriceText.style.display = "";
            progressPriceText.innerHTML = `${formatPrix(prixRestant)} <img src="/coc/image/village principal/ressource/or village-p.jpg" alt="or" class="icone-ressource">`;
        }
    }
}

// Ajouter des écouteurs d'événements pour détecter les changements
document.addEventListener('DOMContentLoaded', () => {
    const tour_archereSelects = [
        document.getElementById('tour_archere1'),
        document.getElementById('tour_archere2'),
        document.getElementById('tour_archere3'),
        document.getElementById('tour_archere4'),
        document.getElementById('tour_archere5'),
        document.getElementById('tour_archere6'),
        document.getElementById('tour_archere7'),
        document.getElementById('tour_archere8'),
        document.getElementById('tour_archere9')
    ];

    // Ajouter un écouteur pour chaque tour_archere
    tour_archereSelects.forEach(select => {
        if (select) {
            select.addEventListener('change', updatetour_archereProgress);
        }
    });

    // Ajouter un écouteur pour le changement du niveau HDV
    const hdvSelect = document.getElementById('hdv');
    if (hdvSelect) {
        hdvSelect.addEventListener('change', updatetour_archereProgress);
    }

    // Initialiser la barre de progression au chargement
    updatetour_archereProgress();
});